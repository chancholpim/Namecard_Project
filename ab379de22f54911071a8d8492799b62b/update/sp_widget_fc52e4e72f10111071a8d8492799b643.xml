<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[api.controller=function() {
	
  var c = this;
	c.additem= function() {
	c.server.update().then(function(response) {
		c.data = {};
	 alert("Successfully added record");
	})
}

	

function onChange(control, oldValue, newValue, isLoading, isTemplate) {
    if (isLoading || newValue === '' || newValue == oldValue) {
       return;
    }
    var getEmailAddr = new GlideAjax('GetEmailAddress');
    getEmailAddr.addParam('sysparm_name','getEmail');
    getEmailAddr.addParam('sysparm_userID', g_form.getValue('u_name_1'));
    getEmailAddr.getXML(populateEmailField);
    function populateEmailField(response){
        var emailFromScriptInclude = response.responseXML.documentElement.getAttribute("answer");
		g_form.clearValue('requested_for_email');
        g_form.setValue('requested_for_email',emailFromScriptInclude);
    }
}
	
	
	
	
	
	
	
	
	
	
	
	
	
};]]></client_script>
        <controller_as>c</controller_as>
        <css/>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>true</has_preview>
        <id>namecard_test01</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {  }]]></link>
        <name>namecard_test01</name>
        <option_schema/>
        <public>false</public>
        <roles/>
        <script><![CDATA[	(function() {
	if(!input)
		return;
		
  var tnamecard = new GlideRecord('x_827039_namecard_namecard');
	
	tnamecard.query();
	tnamecard.u_name_1 = input.name;	
	tnamecard.requested_for_email = input.email
	tnamecard.phone_s1 = input.phone
	tnamecard.short_description = input.short_description;
	tnamecard.insert();
	
		
		
		
		

		
		
		
		
	})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2022-07-01 01:38:38</sys_created_on>
        <sys_id>fc52e4e72f10111071a8d8492799b643</sys_id>
        <sys_mod_count>158</sys_mod_count>
        <sys_name>namecard_test01</sys_name>
        <sys_package display_value="Namecard" source="x_827039_namecard">ab379de22f54911071a8d8492799b62b</sys_package>
        <sys_policy/>
        <sys_scope display_value="Namecard">ab379de22f54911071a8d8492799b62b</sys_scope>
        <sys_update_name>sp_widget_fc52e4e72f10111071a8d8492799b643</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2022-07-04 02:30:16</sys_updated_on>
        <template><![CDATA[<head>
<style>
div {text-align: center;}
</style>
</head>

<h1>Create New record</h1>
<div class="panel panel-default">
<div class="panel-body">
  
<label>Name user</label>
<div class ="form-group"> 
<sn-record-picker id="c.data.name" field="user_name" table="'sys_user'" display-field="'name'" display-fields="'city,zip'" value-field="'sys_id'" search-fields="'name'" page-size="100"  >
</sn-record-picker> 
</div>
  
<label>Email</label>   
<div class ="form-group" >   
<input type="email" ng-model="c.data.email">  
</div>
  
<label>Phone</label>  
<div class ="form-group" >   
 <input type="tel" ng-model="c.data.phone">  
 </div>  
 
<label>Short description</label> 
<div class ="form-group" >     
<input type="text" ng-model="c.data.short_description">
</div>  
  


  
  
  
<div class ="form-group" > 
<input class="btn-primary btn-block" ng-click="c.additem()" type="submit" value="Submit">
</div>
  </div>
</div>


]]></template>
    </sp_widget>
</record_update>
